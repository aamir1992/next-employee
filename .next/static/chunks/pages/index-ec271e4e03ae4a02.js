(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7806)}])},7806:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return Q}});var t=r(4051),a=r.n(t),s=r(5893),o=r(9008),c=r.n(o),i=r(7516),l=r(7294);function u(e,n,r,t,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void r(l)}c.done?n(i):Promise.resolve(i).then(t,a)}function d(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function o(e){u(s,t,a,o,c,"next",e)}function c(e){u(s,t,a,o,c,"throw",e)}o(void 0)}))}}var p="https://aamir1992.github.io/next-employee/",m=function(){var e=d(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"api/users"));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=d(a().mark((function e(n){var r,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"api/users/").concat(n));case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(t=e.sent)){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();function h(e){return x.apply(this,arguments)}function x(){return(x=d(a().mark((function e(n){var r,t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch("".concat(p,"api/users"),r);case 4:return t=e.sent,e.next=7,t.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function y(){return(y=d(a().mark((function e(n,r){var t,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},e.next=3,fetch("".concat(p,"api/users/").concat(n),t);case 3:return s=e.sent,e.next=6,s.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=d(a().mark((function e(n){var r,t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"DELETE",headers:{"Content-Type":"application/json"}},e.next=3,fetch("".concat(p,"api/users/").concat(n),r);case 3:return t=e.sent,e.next=6,t.json();case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=r(8767),j=r(9473),N=r(9527);function w(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function k(){var e=(0,b.useQuery)("users",m),n=e.isLoading,r=e.isError,t=e.data,a=e.error;return n?(0,s.jsx)("div",{children:"Employee is Loading..."}):r?(0,s.jsxs)("div",{children:["Got Error ",a]}):(0,s.jsxs)("table",{className:"min-w-full table-auto",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-800",children:[(0,s.jsx)("th",{className:"px-16 py-2",children:(0,s.jsx)("span",{className:"text-gray-200",children:"Name"})}),(0,s.jsx)("th",{className:"px-16 py-2",children:(0,s.jsx)("span",{className:"text-gray-200",children:"Email"})}),(0,s.jsx)("th",{className:"px-16 py-2",children:(0,s.jsx)("span",{className:"text-gray-200",children:"Salary"})}),(0,s.jsx)("th",{className:"px-16 py-2",children:(0,s.jsx)("span",{className:"text-gray-200",children:"Birthday"})}),(0,s.jsx)("th",{className:"px-16 py-2",children:(0,s.jsx)("span",{className:"text-gray-200",children:"Status"})}),(0,s.jsx)("th",{className:"px-16 py-2",children:(0,s.jsx)("span",{className:"text-gray-200",children:"Actions"})})]})}),(0,s.jsx)("tbody",{className:"bg-gray-200",children:t.map((function(e,n){return(0,l.createElement)(O,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){w(e,n,r[n])}))}return e}({},e,{key:n}))}))})]})}function O(e){var n=e._id,r=e.name,t=e.avatar,a=e.email,o=e.salary,c=e.date,l=e.status,u=(0,j.v9)((function(e){return e.app.client.toggleForm})),d=(0,j.I0)();return(0,s.jsxs)("tr",{className:"bg-gray-50 text-center",children:[(0,s.jsxs)("td",{className:"px-16 py-2 flex flex-row items-center",children:[(0,s.jsx)("img",{src:t||"#",alt:"",className:"h-8 w-8 rounded-full object-cover"}),(0,s.jsx)("span",{className:"text-center ml-2 font-semibold",children:r||"Unknown"})]}),(0,s.jsx)("td",{className:"px-16 py-2",children:(0,s.jsx)("span",{children:a||"Unknown"})}),(0,s.jsx)("td",{className:"px-16 py-2",children:(0,s.jsx)("span",{children:o||"Unknown"})}),(0,s.jsx)("td",{className:"px-16 py-2",children:(0,s.jsx)("span",{children:c||"Unknown"})}),(0,s.jsx)("td",{className:"px-16 py-2",children:(0,s.jsx)("button",{className:"cursor",children:(0,s.jsx)("span",{className:"".concat("Active"==l?"bg-green-500":"bg-rose-500"," text-white px-5 py-1 rounded-full"),children:l||"Unknown"})})}),(0,s.jsxs)("td",{className:"px-16 py-2 flex justify-around gap-5",children:[(0,s.jsx)("button",{className:"cursor",onClick:function(){d((0,N.A1)(n)),u&&d((0,N.Gx)(n))},children:(0,s.jsx)(i.Hlf,{size:25,color:"rgb(34,197,94)"})}),(0,s.jsx)("button",{className:"cursor",onClick:function(){u||d((0,N.mn)(n))},children:(0,s.jsx)(i.GH,{size:25,color:"rgb(244,63,94)"})})]})]})}function C(e){var n=e.message;return(0,s.jsx)("div",{className:"success container mx-auto",children:(0,s.jsxs)("div",{className:"flex justify-center mx-auto border border-yellow-200 bg-yellow-400 w-3/6 text-gray-900 text-md my-4 py-2 text-center bg-opacity-5",children:[n," ",(0,s.jsx)(i.hXj,{size:25,color:"rgb(34,197,94)"})]})})}function E(e){var n=e.message;return(0,s.jsx)("div",{className:"success container mx-auto",children:(0,s.jsxs)("div",{className:"flex justify-center mx-auto border border-red-200 bg-red-400 w-3/6 text-gray-900 text-md my-4 py-2 text-center bg-opacity-5",children:[n," ",(0,s.jsx)(i.hXj,{size:25,color:"rgb(248 113 113)"})]})})}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function D(e,n,r,t,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void r(l)}c.done?n(i):Promise.resolve(i).then(t,a)}function A(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function o(e){D(s,t,a,o,c,"next",e)}function c(e){D(s,t,a,o,c,"throw",e)}o(void 0)}))}}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,a,s=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(t=r.next()).done)&&(s.push(t.value),!n||s.length!==n);o=!0);}catch(i){c=!0,a=i}finally{try{o||null==r.return||r.return()}finally{if(c)throw a}}return s}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return S(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){var n=e.formId,r=e.formData,t=e.setFormData,o=(0,b.useQueryClient)(),c=(0,b.useQuery)(["users",n],(function(){return f(n)})),l=c.isLoading,u=c.isError,d=c.data,p=(c.error,(0,b.useMutation)((function(e){return function(e,n){return y.apply(this,arguments)}(n,e)}),{onSuccess:function(){var e=A(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.prefetchQuery("users",m);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}));if(l)return(0,s.jsx)("div",{children:"Loading...!"});if(u)return(0,s.jsx)("div",{children:"Error"});var h=d.name,x=(d.avatar,d.salary),g=d.date,v=d.email,j=d.status,N=P(h?h.split(" "):r,2),w=N[0],k=N[1],O=function(){var e=A(a().mark((function e(n){var t,s,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o="".concat(null!==(t=r.firstname)&&void 0!==t?t:w," ").concat(null!==(s=r.lastname)&&void 0!==s?s:k),c=Object.assign({},d,r,{name:o}),e.next=6,p.mutate(c);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return p.isLoading?(0,s.jsx)("div",{children:"Loading!"}):p.isError?(0,s.jsx)(E,{message:p.error.message}):p.isSuccess?(0,s.jsx)(C,{message:"Updated Successfully"}):(0,s.jsxs)("form",{className:"grid lg:grid-cols-2 w-4/6 gap-4",onSubmit:O,children:[(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:t,defaultValue:w,name:"firstname",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"FirstName"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:t,defaultValue:k,name:"lastname",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"LastName"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:t,defaultValue:v,name:"email",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"Email"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:t,defaultValue:x,name:"salary",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"Salary"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"date",onChange:t,defaultValue:g,name:"date",className:"border px-5 py-3 focus:outline-none rounded-md",placeholder:"Salary"})}),(0,s.jsxs)("div",{className:"flex gap-10 items-center",children:[(0,s.jsxs)("div",{className:"form-check",children:[(0,s.jsx)("input",{type:"radio",defaultChecked:"Active"==j,onChange:t,value:"Active",id:"radioDefault1",name:"status",className:"form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-green-500 checked:border-green-500 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"radioDefault1",className:"inline-block tet-gray-800",children:"Active"})]}),(0,s.jsxs)("div",{className:"form-check",children:[(0,s.jsx)("input",{type:"radio",defaultChecked:"Active"!==j,onChange:t,value:"Inactive",id:"radioDefault2",name:"status",className:"form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-green-500 checked:border-green-500 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"radioDefault2",className:"inline-block tet-gray-800",children:"Inactive"})]})]}),(0,s.jsxs)("button",{className:"flex justify-center text-md w-2/6 bg-yellow-400 text-white px-4 py-2 border rounded-md hover:bg-gray-50 hover:border-green-500 hover:text-green-500",children:["Update ",(0,s.jsx)("span",{className:"px-1",children:(0,s.jsx)(i.IUX,{size:24})})]})]})}function I(e){var n=e.formData,r=e.setFormData,t=(0,b.useQueryClient)(),a=(0,b.useMutation)(h,{onSuccess:function(){t.prefetchQuery("users",m)}});return a.isLoading?(0,s.jsx)("div",{children:"Loading!"}):a.isError?(0,s.jsx)(E,{message:a.error.message}):a.isSuccess?(0,s.jsx)(C,{message:"Added Successfully"}):(0,s.jsxs)("form",{className:"grid lg:grid-cols-2 w-4/6 gap-4",onSubmit:function(e){if(e.preventDefault(),0==Object.keys(n).length)return console.log("Don't have Form Data");var r=n.firstname,t=n.lastname,s=n.email,o=n.salary,c=n.date,i=n.status,l={name:"".concat(r," ").concat(t),avatar:"https://randomuser.me/api/portraits/men/".concat(Math.floor(10*Math.random()),".jpg"),email:s,salary:o,date:c,status:null!==i&&void 0!==i?i:"Active"};a.mutate(l)},children:[(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:r,name:"firstname",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"FirstName"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:r,name:"lastname",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"LastName"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:r,name:"email",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"Email"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"text",onChange:r,name:"salary",className:"border w-full px-5 py-3 focus:outline-none rounded-md",placeholder:"Salary"})}),(0,s.jsx)("div",{className:"input-type",children:(0,s.jsx)("input",{type:"date",onChange:r,name:"date",className:"border px-5 py-3 focus:outline-none rounded-md",placeholder:"Salary"})}),(0,s.jsxs)("div",{className:"flex gap-10 items-center",children:[(0,s.jsxs)("div",{className:"form-check",children:[(0,s.jsx)("input",{type:"radio",onChange:r,value:"Active",id:"radioDefault1",name:"status",className:"form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-green-500 checked:border-green-500 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"radioDefault1",className:"inline-block tet-gray-800",children:"Active"})]}),(0,s.jsxs)("div",{className:"form-check",children:[(0,s.jsx)("input",{type:"radio",onChange:r,value:"Inactive",id:"radioDefault2",name:"status",className:"form-check-input appearance-none rounded-full h-4 w-4 border border-gray-300 bg-white checked:bg-green-500 checked:border-green-500 focus:outline-none transition duration-200 mt-1 align-top bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer"}),(0,s.jsx)("label",{htmlFor:"radioDefault2",className:"inline-block tet-gray-800",children:"Inactive"})]})]}),(0,s.jsxs)("button",{type:"submit",className:"flex justify-center text-md w-2/6 bg-green-500 text-white px-4 py-2 border rounded-md hover:bg-gray-50 hover:border-green-500 hover:text-green-500",children:["Add ",(0,s.jsx)("span",{className:"px-1",children:(0,s.jsx)(i.poH,{size:24})})]})]})}function z(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var _=function(e,n){return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){z(e,n,r[n])}))}return e}({},e,z({},n.target.name,n.target.value))};function L(){var e=(0,l.useReducer)(_,{}),n=e[0],r=e[1],t=(0,j.v9)((function(e){return e.app.client.formId}));return(0,s.jsx)("div",{className:"container mx-auto py-5",children:t?F({formId:t,formData:n,setFormData:r}):I({formData:n,setFormData:r})})}function U(e,n,r,t,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void r(l)}c.done?n(i):Promise.resolve(i).then(t,a)}function T(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function o(e){U(s,t,a,o,c,"next",e)}function c(e){U(s,t,a,o,c,"throw",e)}o(void 0)}))}}function Q(){var e=(0,j.v9)((function(e){return e.app.client.toggleForm})),n=(0,j.v9)((function(e){return e.app.client.deleteId})),r=(0,b.useQueryClient)(),t=(0,j.I0)(),o=function(){var e=T(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,g(n);case 3:return e.next=5,r.prefetchQuery("users",m);case 5:return e.next=7,t((0,N.mn)(null));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=T(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("cancel"),e.next=3,t((0,N.mn)(null));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)("section",{children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"CRUD Application"}),(0,s.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("main",{className:"py-5",children:[(0,s.jsx)("h1",{className:"text-xl md:text-5xl text-center font-bold py-10",children:"Employee Management"}),(0,s.jsxs)("div",{className:"container mx-auto flex justify-between py-5 border-b",children:[(0,s.jsx)("div",{className:"left flex gap-3",children:(0,s.jsxs)("button",{onClick:function(){t((0,N.A1)())},className:"flex bg-indigo-500 text-white px-4 py-2 border rounded-md hover:bg-grary-50 hover:border-indigo-500 hover:text-gray-800",children:["Add Employee ",(0,s.jsx)("span",{className:"px-1",children:(0,s.jsx)(i.cHT,{size:23})})]})}),n?M({deletehandler:o,canclehandler:l}):(0,s.jsx)(s.Fragment,{})]}),e?(0,s.jsx)(L,{}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)("div",{className:"container mx-auto table-responsive",children:(0,s.jsx)(k,{})})]})]})}function M(e){var n=e.deletehandler,r=e.canclehandler;return(0,s.jsxs)("div",{className:"flex gap-5",children:[(0,s.jsx)("button",{children:"Are you sure?"}),(0,s.jsxs)("button",{onClick:n,className:"flex bg-red-500 text-white px-4 py-2 border rounded-md hover:bg-rose-500 hover:border-red-500 hover:text-gray-50",children:["Yes ",(0,s.jsx)("span",{className:"px-1",children:(0,s.jsx)(i.czh,{color:"rgb(255 255 255)",size:25})})]}),(0,s.jsxs)("button",{onClick:r,className:"flex bg-green-500 text-white px-4 py-2 border rounded-md hover:bg-gree-500 hover:border-green-500 hover:text-gray-50",children:["No ",(0,s.jsx)("span",{className:"px-1",children:(0,s.jsx)(i.hXj,{color:"rgb(255 255 255)",size:25})})]})]})}},9008:function(e,n,r){e.exports=r(3121)},8357:function(e,n,r){"use strict";r.d(n,{w_:function(){return l}});var t=r(7294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=t.createContext&&t.createContext(a),o=function(){return o=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},o.apply(this,arguments)},c=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(r[t[a]]=e[t[a]])}return r};function i(e){return e&&e.map((function(e,n){return t.createElement(e.tag,o({key:n},e.attr),i(e.child))}))}function l(e){return function(n){return t.createElement(u,o({attr:o({},e.attr)},n),i(e.child))}}function u(e){var n=function(n){var r,a=e.attr,s=e.size,i=e.title,l=c(e,["attr","size","title"]),u=s||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,l,{className:r,style:o(o({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&t.createElement("title",null,i),e.children)};return void 0!==s?t.createElement(s.Consumer,null,(function(e){return n(e)})):n(a)}}},function(e){e.O(0,[874,774,888,179],(function(){return n=5557,e(e.s=n);var n}));var n=e.O();_N_E=n}]);